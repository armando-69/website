<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>HOME | AW Engineers</title>
<link rel="stylesheet" href="styles.css">
<link rel="icon" href="layout/favicons/Black_Logo.ico" media="(prefers-color-scheme: light)">
<link rel="icon" href="layout/favicons/White_Logo.ico" media="(prefers-color-scheme: dark)">
<script type="text/javascript" src="https://cdn.jsdelivr.net/npm/@emailjs/browser@3/dist/email.min.js"></script>
<script type="text/javascript">
    (function() {
        // Replace 'YOUR_PUBLIC_KEY' with your actual EmailJS public key
        emailjs.init('NwGxZ5hgsLRW0Pm7r');
    })();
</script>
</head>

<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-QHWLDNEJRQ"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-QHWLDNEJRQ');
</script>

<body>

<div class="background">
  <div class="card">
    <div class="logo">
      <!-- Replace with your logo image -->
      <img src="layout/logos/Grey_Logo.png" alt="AW Engineers" />
    </div>
    <h4>Site Nearly Ready...</h4>
    <div class="container">    
      <div class="progress2 progress-moved">
        <div class="progress-bar2" >
        </div>                       
      </div> 
    </div>
    <h3>Enquire Now</h3>
    <form id="contact-form">
      <div class="form-control">
        <label for="name">Name</label>
        <input type="text" id="name" name="user_name">
      </div>
      <div class="form-control">
        <label for="email">Email (required)</label>
        <input type="email" id="email" name="user_email" required>
      </div>    
      <div class="form-control">
        <label for="subject">Subject (required)</label>
        <input type="subject" id="subject" name="subject" required>
      </div>    
      <div class="form-control">
        <label for="message">Your Message</label>
        <textarea id="message" name="message" rows="4"></textarea>
      </div>
      <div style="display:none;">
        <label for="honeypot">If you see this, leave it blank</label>
        <input type="text" name="honeypot" id="honeypot" />
    </div>

      <div class="form-control">
        <button type="submit">Contact Us</button>
      </div>
    </form>
  </div>
</div>
<script>
  document.getElementById('contact-form').addEventListener('submit', function(event) {
      event.preventDefault();

      // Check if the honeypot field is filled
      if(document.getElementById('honeypot').value) {
          console.log('Spam detected');
          return; // Do not submit the form
      }

      // Check the number of submissions
      let submissionCount = parseInt(localStorage.getItem('submissionCount') || 0);
      if (submissionCount >= 2) {
          alert('You have reached the maximum submission limit.');
          return; // Do not submit the form
      }

      // Proceed with sending email via EmailJS
      emailjs.sendForm('service_n3cnseo', 'template_xdcaw6y', this)
          .then((response) => {
              console.log('SUCCESS!', response.status, response.text);
              this.reset(); // Reset the form after successful form submission
              alert("Thank you for your message. It has been sent.");

              // Increment and save the submission count
              localStorage.setItem('submissionCount', submissionCount + 1);
          }, (error) => {
              console.log('FAILED...', error);
              alert("Failed to send message. Please try again.");
          });
  });
</script>

</body>
</html>
